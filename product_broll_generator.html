<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Foto Produk: Magic Konten Generation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-dark: #0f172a;
            --sidebar-hover: #1e293b;
            --sidebar-border: #334155;
            --bg-light: #f9fafb;
            --surface: #ffffff;
            --border-color: #e5e7eb;
            --border-medium: #d1d5db;
            --text-dark: #1f2937;
            --text-medium: #6b7280;
            --text-light: #9ca3af;
            --accent: #14b8a6;
            --accent-hover: #0d9488;
            --accent-light-bg: #f0fdfa;
            --accent-light-border: #a7f3d0;
            --accent-text: #0f766e;
        }
        body {
            font-family: 'Inter', sans-serif;
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .card {
            background-color: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(229, 231, 235, 0.8);
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            transition: box-shadow 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .card:hover {
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            transform: translateY(-2px);
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .loader-icon {
            display: inline-block;
            border: 2px solid rgba(0,0,0,0.1);
            border-left-color: var(--accent-text);
            border-radius: 50%;
            width: 1rem;
            height: 1rem;
            animation: spin 0.8s linear infinite;
        }
        .loader-icon-light {
             border-left-color: white;
        }
        .file-input-label {
            cursor: pointer;
            border: 2px dashed var(--border-medium);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: border-color 0.3s, background-color 0.3s;
            height: 100%;
            color: var(--text-medium);
            background-color: rgba(255,255,255,0.2);
        }
        .file-input-label:hover {
            border-color: var(--accent);
            background-color: var(--accent-light-bg);
        }
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(5px);
            display: flex; align-items: center; justify-content: center; z-index: 50;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .modal-backdrop.visible { opacity: 1; pointer-events: auto; }
        .modal-content {
            background-color: var(--bg-dark); border: 1px solid var(--sidebar-border);
            padding: 2rem; border-radius: 0.75rem; width: 90%; max-width: 500px;
            transform: scale(0.95); transition: transform 0.3s ease;
            max-height: 90vh; overflow-y: auto; color: #e2e8f0;
        }
        .modal-backdrop.visible .modal-content { transform: scale(1); }
        .sidebar-btn {
            display: flex; align-items: center; width: 100%; padding: 0.75rem 1rem;
            font-weight: 600; border-radius: 0.5rem; transition: all 0.2s ease-in-out;
            border: 1px solid transparent; cursor: pointer; color: #cbd5e1;
        }
        .sidebar-btn.active {
            background-color: var(--accent);
            color: white;
        }
        .sidebar-btn:not(.active):hover { background-color: var(--sidebar-hover); }
        .mobile-nav-bar {
            position: fixed; 
            bottom: 0; 
            left: 0; 
            right: 0;
            background-color: var(--bg-dark); 
            border-top: 1px solid var(--sidebar-border);
            display: flex; 
            padding: 0.5rem; 
            z-index: 30;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .mobile-nav-bar::-webkit-scrollbar {
            display: none;
        }
        .mobile-nav-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 0.25rem; color: #cbd5e1; font-size: 0.75rem; line-height: 1;
            padding: 0.5rem; border-radius: 0.5rem; transition: color 0.3s, background-color 0.3s;
            flex-shrink: 0;
            flex-basis: calc(100% / 5);
            min-width: 70px;
        }
        .mobile-nav-item.active { 
            color: white; 
            background-color: var(--accent);
        }
        .upload-box { border: 2px dashed var(--border-medium); transition: all 0.3s ease; }
        .upload-box.dragging { border-color: var(--accent); background-color: var(--accent-light-bg); }
        .upload-box img { max-height: 100%; max-width: 100%; object-fit: contain; }
       
        textarea, input[type="text"], select {
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(5px);
            border: 1px solid var(--border-medium);
            color: var(--text-dark);
        }
        textarea:focus, input[type="text"]:focus, select:focus {
            --tw-ring-color: var(--accent); border-color: var(--accent);
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
        #ef-draw-canvas {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08"/><path d="M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z"/></svg>') 12 12, crosshair;
            touch-action: none;
        }
        input[type=range][orient=vertical] {
            writing-mode: bt-lr;
            -webkit-appearance: slider-vertical;
            width: 8px;
            height: 100px;
        }
        .option-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-medium);
            background-color: white;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .option-btn.selected {
            background-color: var(--accent-light-bg);
            border-color: var(--accent);
            color: var(--accent-text);
            font-weight: 600;
        }
        .validation-status {
            font-size: 0.75rem;
            margin-top: 0.5rem;
            height: 1rem;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-gray-100">

    <div class="relative">
        <aside class="hidden md:flex flex-col w-64 bg-slate-900 fixed top-0 left-0 h-screen z-10 border-r border-slate-800">
            <div class="flex items-center justify-center h-20 border-b border-slate-800">
                <div class="flex items-center space-x-3">
                    <h1 class="text-2xl font-bold text-slate-100">AI Foto Produk</h1>
                </div>
            </div>
            <nav class="flex-1 px-4 py-4 space-y-2">
                <button id="tab-virtual-try-on" class="sidebar-btn">
                    <span>Foto Produk</span>
                </button>
                <button id="tab-combine-text" class="sidebar-btn">
                    <span>Poster Produk</span>
                </button>
            </nav>
        </aside>

        <main class="md:ml-64 flex-1 pb-24 md:pb-0">
             <div class="w-full mx-auto p-4 sm:p-6 lg:p-8">
                <header class="text-center mb-6 md:mb-8 md:hidden">
                    <div class="flex items-center justify-center space-x-3 mb-2">
                        <h1 class="text-2xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-slate-900 to-slate-600 bg-clip-text text-transparent tracking-tight">AI Foto Produk</h1>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 max-w-3xl mx-auto md:text-lg">Kreasi Visual Instan Bertenaga AI</p>
                </header>

                <div id="content-virtual-try-on">
                     <div class="card p-4 md:p-10 w-full mx-auto max-w-6xl">
                        <div class="text-center mb-6 md:mb-8">
                            <h2 class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-600 bg-clip-text text-transparent">Foto Produk</h2>
                        </div>
                        
                        <div class="border-b border-gray-200 mb-6">
                            <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                                <button id="vto-tab-product-only" class="vto-tab-btn border-teal-500 text-teal-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    Produk Saja
                                </button>
                                <button id="vto-tab-product-model" class="vto-tab-btn border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    Produk + Model
                                </button>
                            </nav>
                        </div>
                        
                        <div id="vto-content-product-only">
                            <p class="text-gray-600 mt-2 text-sm md:text-base text-center mb-6">Unggah foto produk Anda dan biarkan AI membuatkan berbagai skenario photoshoot profesional.</p>
                            <div class="flex flex-col gap-8">
                                <div class="flex flex-col gap-6">
                                    <div>
                                        <h3 class="text-lg font-semibold mb-3 text-gray-800">1. Unggah Foto Produk</h3>
                                        <label for="ps-image-input" id="ps-upload-box" class="upload-box w-full h-64 rounded-lg flex items-center justify-center cursor-pointer relative overflow-hidden">
                                            <div id="ps-placeholder" class="text-center text-gray-500 p-2">
                                                <i data-lucide="package" class="mx-auto h-12 w-12"></i>
                                                <p class="mt-2 text-base">Klik atau seret foto produk</p>
                                            </div>
                                            <img id="ps-preview" class="hidden absolute top-0 left-0 w-full h-full object-contain" alt="Pratinjau Produk">
                                            <button id="ps-remove-btn" class="hidden absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 z-10"><i data-lucide="x" class="w-4 h-4"></i></button>
                                        </label>
                                        <input type="file" id="ps-image-input" class="hidden" accept="image/png, image/jpeg, image/webp">
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <h3 class="text-lg font-semibold mb-3 text-gray-800">2. Pilih Pencahayaan</h3>
                                            <div id="ps-lighting-options" class="flex gap-4">
                                                <button data-value="light" class="option-btn selected flex items-center justify-center gap-2 flex-1">
                                                    <i data-lucide="sun" class="w-4 h-4"></i>
                                                    <span>Light</span>
                                                </button>
                                                <button data-value="dark" class="option-btn flex items-center justify-center gap-2 flex-1">
                                                    <i data-lucide="moon" class="w-4 h-4"></i>
                                                    <span>Dark</span>
                                                </button>
                                            </div>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-semibold mb-3 text-gray-800">3. Pilih Suasana</h3>
                                            <div id="ps-mood-options" class="flex gap-4">
                                                <button data-value="clean" class="option-btn selected flex items-center justify-center gap-2 flex-1">
                                                    <i data-lucide="sparkles" class="w-4 h-4"></i>
                                                    <span>Clean</span>
                                                </button>
                                                <button data-value="crowd" class="option-btn flex items-center justify-center gap-2 flex-1">
                                                    <i data-lucide="users" class="w-4 h-4"></i>
                                                    <span>Crowd</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-6">
                                        <h3 class="text-lg font-semibold mb-3 text-gray-800">4. Pilih Rasio</h3>
                                        <div id="ps-ratio-options" class="grid grid-cols-3 gap-3">
                                            <button data-value="1:1" class="option-btn selected flex items-center justify-center gap-2"><i data-lucide="square" class="w-4 h-4"></i><span>1:1</span></button>
                                            <button data-value="4:3" class="option-btn flex items-center justify-center gap-2"><i data-lucide="rectangle-horizontal" class="w-4 h-4"></i><span>4:3</span></button>
                                            <button data-value="3:4" class="option-btn flex items-center justify-center gap-2"><i data-lucide="rectangle-vertical" class="w-4 h-4"></i><span>3:4</span></button>
                                        </div>
                                    </div>
                                    <div id="ps-location-container" class="hidden mt-6">
                                        <h3 class="text-lg font-semibold mb-3 text-gray-800">5. Pilih Lokasi</h3>
                                        <div id="ps-location-options" class="flex gap-4">
                                            <button data-value="indoor" class="option-btn selected flex items-center justify-center gap-2 flex-1">
                                                <i data-lucide="building-2" class="w-4 h-4"></i>
                                                <span>Indoor</span>
                                            </button>
                                            <button data-value="outdoor" class="option-btn flex items-center justify-center gap-2 flex-1">
                                                <i data-lucide="mountain-sun" class="w-4 h-4"></i>
                                                <span>Outdoor</span>
                                            </button>
                                        </div>
                                    </div>
                                    <button id="ps-generate-btn" class="w-full mt-4 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center text-lg bg-gradient-to-r from-teal-500 to-cyan-500 shadow-md hover:shadow-lg hover:-translate-y-px transition-all duration-300 disabled:bg-slate-200 disabled:shadow-none disabled:translate-y-0" disabled>
                                        <i data-lucide="sparkles" class="w-5 h-5 mr-2"></i>
                                        <span>Buat Foto Produk</span>
                                    </button>
                                </div>
                                <div id="ps-results-container" class="hidden">
                                    <h3 class="text-xl md:text-2xl font-bold text-center mb-6 text-gray-800">4 Variasi Foto Produk</h3>
                                    <div id="ps-results-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
                                </div>
                            </div>
                        </div>

                        <div id="vto-content-product-model" class="hidden">
                            <p class="text-gray-600 mt-2 text-sm md:text-base text-center mb-6">Unggah foto produk dan foto model, dan biarkan AI menggabungkannya menjadi foto profesional.</p>
                            <main class="w-full flex-grow flex flex-col gap-8">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                   <div class="card p-4 flex flex-col">
                                        <h2 class="text-lg md:text-xl font-semibold mb-3 text-center text-gray-800">1. Unggah Foto Produk</h2>
                                        <label for="vto-product-input" id="vto-product-upload-box" class="upload-box w-full h-48 sm:h-80 flex-grow rounded-lg flex items-center justify-center cursor-pointer relative overflow-hidden">
                                            <div id="vto-product-placeholder" class="text-center text-gray-500 p-2">
                                                <i data-lucide="package" class="mx-auto h-10 w-10"></i>
                                                <p class="mt-2 text-sm">Seret & lepas atau klik</p>
                                            </div>
                                            <img id="vto-product-preview" class="hidden absolute top-0 left-0 w-full h-full object-contain" alt="Pratinjau Produk">
                                             <button id="vto-remove-product-btn" class="hidden absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 z-10"><i data-lucide="x" class="w-3 h-3"></i></button>
                                        </label>
                                        <input type="file" id="vto-product-input" class="hidden" accept="image/*">
                                    </div>
                                   <div class="card p-4 flex flex-col">
                                        <h2 class="text-lg md:text-xl font-semibold mb-3 text-center text-gray-800">2. Unggah Foto Model</h2>
                                        <label for="vto-model-input" id="vto-model-upload-box" class="upload-box w-full h-48 sm:h-80 flex-grow rounded-lg flex items-center justify-center cursor-pointer relative overflow-hidden">
                                            <div id="vto-model-placeholder" class="text-center text-gray-500 p-2">
                                                <i data-lucide="user" class="mx-auto h-10 w-10"></i>